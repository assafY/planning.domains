angular.module("app",["ngMaterial","ngAnimate","ngRoute","ngMessages","ngFileUpload"]).run(["$rootScope","$location","$timeout",function(e,o,l){e.$on("$viewContentLoaded",function(){l(function(){componentHandler.upgradeAllRegistered()})})}]),angular.module("app").controller("CompetitionController",["$rootScope","$scope","CompetitionService",function(e,o,l){e.leaderboard?o.leaderboard=e.leaderboard:l.fetchLeaderboard().success(function(l){l&&(o.leaderboard=e.leaderboard=l)})}]),angular.module("app").service("CompetitionService",["$http",function(e){this.fetchLeaderboard=function(){return e.get("/api/domains/leaderboard")}}]),angular.module("app").controller("DomainController",["$rootScope","$scope","DomainService",function(e,o,l){e.domains?o.domains=e.domains:l.fetchAll().success(function(l){l&&(o.domains=e.domains=l)}),o.getDomain=function(o){l.fetchDomain(o).success(function(o){for(var n in o.results.problem)o.domain.problems.problem[n].$.results=o.results.problem[n];e.currentDomain=o,l.singleDomainView()})}}]),angular.module("app").service("DomainService",["$http","$location",function(e,o){var l;this.fetchAll=function(){return e.get("/api/domains")},this.fetchDomain=function(o){return l=o,e({url:"/api/domains/"+o,method:"GET",params:{domainId:o}})},this.fetchPddlFile=function(o){return e({url:"/api/domains/"+l+"/"+o,method:"GET",params:{domainId:l,fileName:o}})},this.singleDomainView=function(){o.path("/view/domain")},this.problemView=function(){o.path("/view/domain/pddl")},this.domainView=function(){o.path("/view/domain/pddl")}}]),angular.module("app").controller("DomainViewController",["$rootScope","$scope","DomainService",function(e,o,l){o.domain=e.currentDomain,o.getPddlFile=function(o){l.fetchPddlFile(o).success(function(o){o&&(e.pddl=o),l.problemView()})}}]),angular.module("app").controller("MainController",["$scope",function(e){}]),angular.module("app").controller("PddlViewController",["$rootScope","$scope",function(e,o){o.pddl=e.pddl}]),angular.module("app").config(["$routeProvider",function(e){e.when("/",{controller:"MainController",templateUrl:"index.html"}).when("/view",{controller:"DomainController",templateUrl:"view.html"}).when("/view/domain",{controller:"DomainViewController",templateUrl:"domain-view.html"}).when("/view/domain/pddl",{controller:"PddlViewController",templateUrl:"pddl-view.html"}).when("/submit",{controller:"SubmitController",templateUrl:"submit.html"}).when("/submit/planner",{controller:"SubmitController",templateUrl:"submit-planner.html"}).when("/submit/success",{controller:"SubmitController",templateUrl:"success.html"}).when("/submit/error",{controller:"SubmitController",templateUrl:"error.html"}).when("/competition",{controller:"CompetitionController",templateUrl:"competition.html"})}]),angular.module("app").controller("SubmitController",["$scope","$rootScope","$timeout","Upload","SubmitService",function(e,o,l,n,i){e.allDomainFiles=[{id:"domain1"}],e.publishDate=new Date,e.formSubmitted=function(){return o.formSubmitted===!0?!0:!1},e.addDomain=function(){if(e.allDomainFiles[e.allDomainFiles.length-1].domainFile&&e.allDomainFiles[e.allDomainFiles.length-1].problemFiles){var o=e.allDomainFiles.length+1;e.allDomainFiles.push({id:"domain"+o})}},e.getUploadButton=function(e){angular.element(document.getElementById(e).click())},e.submitForm=function(){if(e.submitted=!0,e.allDomainFiles[0].domainFile&&e.allDomainFiles[0].problemFiles){e.form.publishDate=e.publishDate,e.form.domainFiles=[];for(var l=0;l<e.allDomainFiles.length;l++)if(e.allDomainFiles[l].domainFile&&e.allDomainFiles[l].problemFiles){problemFilesNames=[];for(var n=0;n<e.allDomainFiles[l].problemFiles.length;n++)problemFilesNames.push(e.allDomainFiles[l].problemFiles[n].name);e.form.domainFiles[l]={domainFile:e.allDomainFiles[l].domainFile.name,problemFiles:problemFilesNames}}i.submitDomainForm(e.form).success(function(l){o.formSubmitted=!0,e.uploadFiles(l).success(function(){i.domainNotifyServer(l).success(function(){i.formSuccess()})}).error(function(){i.formError()})})}},e.submitPlanner=function(){e.plannerForm.plannerFile&&(o.formSubmitted=!0,e.uploadPlanner().success(function(e){i.plannerNotifyServer(e).success(function(){i.formSuccess()})}).error(function(){i.formError()}))},e.uploadFiles=function(o){for(var l=[],i=0;i<e.allDomainFiles.length;++i)if(e.allDomainFiles[i].domainFile&&e.allDomainFiles[i].problemFiles){l.push(e.allDomainFiles[i].domainFile);for(var r=0;r<e.allDomainFiles[i].problemFiles.length;++r)l.push(e.allDomainFiles[i].problemFiles[r])}return n.upload({url:"/api/upload",arrayKey:"",data:{files:l,dirname:o}})},e.uploadPlanner=function(){return n.upload({url:"/api/upload/planner",data:{file:e.plannerForm.plannerFile,email:e.plannerForm.email,org:e.plannerForm.org}})}}]),angular.module("app").service("SubmitService",["$http","$location",function(e,o){this.submitDomainForm=function(o){return e({url:"/api/upload/domain-form",method:"POST",data:o})},this.plannerNotifyServer=function(o){return e({url:"/api/upload/planner-notify",method:"GET",params:{dirname:o}})},this.domainNotifyServer=function(o){return e({url:"/api/upload/domain-notify",method:"GET",params:{dirname:o}})},this.formSuccess=function(){o.path("/submit/success")},this.formError=function(){o.path("/submit/error")}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImNvbXBldGl0aW9uLmN0cmwuanMiLCJjb21wZXRpdGlvbi5zdmMuanMiLCJkb21haW4uY3RybC5qcyIsImRvbWFpbi5zdmMuanMiLCJkb21haW52aWV3LmN0cmwuanMiLCJtYWluLmN0cmwuanMiLCJwZGRsdmlldy5jdHJsLmpzIiwicm91dGVzLmpzIiwic3VibWl0LmN0cmwuanMiLCJzdWJtaXQuc3ZjLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJHRpbWVvdXQiLCIkb24iLCJjb21wb25lbnRIYW5kbGVyIiwidXBncmFkZUFsbFJlZ2lzdGVyZWQiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiQ29tcGV0aXRpb25TZXJ2aWNlIiwibGVhZGVyYm9hcmQiLCJmZXRjaExlYWRlcmJvYXJkIiwic3VjY2VzcyIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJnZXQiLCJEb21haW5TZXJ2aWNlIiwiZG9tYWlucyIsImZldGNoQWxsIiwiZ2V0RG9tYWluIiwiZG9tYWluSWQiLCJmZXRjaERvbWFpbiIsImRvbWFpbiIsInByb2JsZW0iLCJyZXN1bHRzIiwicHJvYmxlbXMiLCIkIiwiY3VycmVudERvbWFpbiIsInNpbmdsZURvbWFpblZpZXciLCJsb2NhbERvbWFpbklkIiwidXJsIiwibWV0aG9kIiwicGFyYW1zIiwiZmV0Y2hQZGRsRmlsZSIsImZpbGVOYW1lIiwicGF0aCIsInByb2JsZW1WaWV3IiwiZG9tYWluVmlldyIsImdldFBkZGxGaWxlIiwicGRkbCIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiVXBsb2FkIiwiU3VibWl0U2VydmljZSIsImFsbERvbWFpbkZpbGVzIiwiaWQiLCJwdWJsaXNoRGF0ZSIsIkRhdGUiLCJmb3JtU3VibWl0dGVkIiwiYWRkRG9tYWluIiwibGVuZ3RoIiwiZG9tYWluRmlsZSIsInByb2JsZW1GaWxlcyIsIm5ld0RvbWFpbklkIiwicHVzaCIsImdldFVwbG9hZEJ1dHRvbiIsImVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2xpY2siLCJzdWJtaXRGb3JtIiwic3VibWl0dGVkIiwiZm9ybSIsImRvbWFpbkZpbGVzIiwiaSIsInByb2JsZW1GaWxlc05hbWVzIiwiaiIsIm5hbWUiLCJzdWJtaXREb21haW5Gb3JtIiwiZGlybmFtZSIsInVwbG9hZEZpbGVzIiwiZG9tYWluTm90aWZ5U2VydmVyIiwiZm9ybVN1Y2Nlc3MiLCJlcnJvciIsImZvcm1FcnJvciIsInN1Ym1pdFBsYW5uZXIiLCJwbGFubmVyRm9ybSIsInBsYW5uZXJGaWxlIiwidXBsb2FkUGxhbm5lciIsImRpck5hbWUiLCJwbGFubmVyTm90aWZ5U2VydmVyIiwiZmlsZXMiLCJ1cGxvYWQiLCJhcnJheUtleSIsImRhdGEiLCJmaWxlIiwiZW1haWwiLCJvcmciLCJmb3JtRGF0YSJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsT0FDQSxhQUNBLFlBQ0EsVUFDQSxhQUNBLGlCQUNBQyxLQUFBLGFBQUEsWUFBQSxXQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0FGLEVBQUFHLElBQUEscUJBQUEsV0FDQUQsRUFBQSxXQUNBRSxpQkFBQUMsOEJDVEFSLFFBQUFDLE9BQUEsT0FDQVEsV0FBQSx5QkFBQSxhQUFBLFNBQUEscUJBQUEsU0FBQU4sRUFBQU8sRUFBQUMsR0FDQVIsRUFBQVMsWUFPQUYsRUFBQUUsWUFBQVQsRUFBQVMsWUFOQUQsRUFBQUUsbUJBQUFDLFFBQUEsU0FBQUYsR0FDQUEsSUFDQUYsRUFBQUUsWUFBQVQsRUFBQVMsWUFBQUEsUUNMQVosUUFBQUMsT0FBQSxPQUNBYyxRQUFBLHNCQUFBLFFBQUEsU0FBQUMsR0FFQUMsS0FBQUosaUJBQUEsV0FDQSxNQUFBRyxHQUFBRSxJQUFBLGdDQ0pBbEIsUUFBQUMsT0FBQSxPQUNBUSxXQUFBLG9CQUFBLGFBQUEsU0FBQSxnQkFBQSxTQUFBTixFQUFBTyxFQUFBUyxH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cHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuXHQnbmdNYXRlcmlhbCcsXG5cdCduZ0FuaW1hdGUnLFxuXHQnbmdSb3V0ZScsXG5cdCduZ01lc3NhZ2VzJyxcblx0J25nRmlsZVVwbG9hZCdcbl0pLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAkbG9jYXRpb24sICR0aW1lb3V0KSB7XG4gICAgJHJvb3RTY29wZS4kb24oJyR2aWV3Q29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbXBvbmVudEhhbmRsZXIudXBncmFkZUFsbFJlZ2lzdGVyZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdDb21wZXRpdGlvbkNvbnRyb2xsZXInLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIENvbXBldGl0aW9uU2VydmljZSkge1xuXHRpZiAoISRyb290U2NvcGUubGVhZGVyYm9hcmQpIHtcbiAgICAgICAgQ29tcGV0aXRpb25TZXJ2aWNlLmZldGNoTGVhZGVyYm9hcmQoKS5zdWNjZXNzIChmdW5jdGlvbiAobGVhZGVyYm9hcmQpIHtcbiAgICAgICAgICAgIGlmIChsZWFkZXJib2FyZCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5sZWFkZXJib2FyZCA9ICRyb290U2NvcGUubGVhZGVyYm9hcmQgPSBsZWFkZXJib2FyZFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAgICRzY29wZS5sZWFkZXJib2FyZCA9ICRyb290U2NvcGUubGVhZGVyYm9hcmRcbiAgICB9XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdDb21wZXRpdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCkge1xuXG4gICAgdGhpcy5mZXRjaExlYWRlcmJvYXJkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZG9tYWlucy9sZWFkZXJib2FyZCcpXG4gICAgfVxufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdEb21haW5Db250cm9sbGVyJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCBEb21haW5TZXJ2aWNlKSB7XG5cdGlmICghJHJvb3RTY29wZS5kb21haW5zKSB7XG5cdFx0RG9tYWluU2VydmljZS5mZXRjaEFsbCgpLnN1Y2Nlc3MgKGZ1bmN0aW9uIChkb21haW5zKSB7XG5cdFx0XHRpZiAoZG9tYWlucylcblx0XHRcdFx0JHNjb3BlLmRvbWFpbnMgPSAkcm9vdFNjb3BlLmRvbWFpbnMgPSBkb21haW5zO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdCRzY29wZS5kb21haW5zID0gJHJvb3RTY29wZS5kb21haW5zO1xuXHR9XG5cdCRzY29wZS5nZXREb21haW4gPSBmdW5jdGlvbihkb21haW5JZCkge1xuXHRcdERvbWFpblNlcnZpY2UuZmV0Y2hEb21haW4oZG9tYWluSWQpLnN1Y2Nlc3MgKGZ1bmN0aW9uIChkb21haW4pIHtcblx0XHRcdGZvciAodmFyIHByb2JsZW0gaW4gZG9tYWluLnJlc3VsdHMucHJvYmxlbSkge1xuXHRcdFx0XHRkb21haW4uZG9tYWluLnByb2JsZW1zLnByb2JsZW1bcHJvYmxlbV0uJC5yZXN1bHRzID0gZG9tYWluLnJlc3VsdHMucHJvYmxlbVtwcm9ibGVtXTtcblx0XHRcdH07XG5cdFx0XHQkcm9vdFNjb3BlLmN1cnJlbnREb21haW4gPSBkb21haW47XG5cdFx0XHREb21haW5TZXJ2aWNlLnNpbmdsZURvbWFpblZpZXcoKTtcblx0XHR9KTtcblx0fVxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnRG9tYWluU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCAkbG9jYXRpb24pIHtcblxuXHR2YXIgbG9jYWxEb21haW5JZDtcblxuXHR0aGlzLmZldGNoQWxsID0gZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvZG9tYWlucycpO1xuXHR9O1xuXG5cdHRoaXMuZmV0Y2hEb21haW4gPSBmdW5jdGlvbihkb21haW5JZCkge1xuXHRcdGxvY2FsRG9tYWluSWQgPSBkb21haW5JZDtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdCAgICB1cmw6ICcvYXBpL2RvbWFpbnMvJyArIGRvbWFpbklkLCBcblx0XHQgICAgbWV0aG9kOiBcIkdFVFwiLFxuXHRcdCAgICBwYXJhbXM6IHsnZG9tYWluSWQnOiBkb21haW5JZH1cblx0XHR9KTtcblx0fTtcblxuXHR0aGlzLmZldGNoUGRkbEZpbGUgPSBmdW5jdGlvbihmaWxlTmFtZSkge1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHR1cmw6ICcvYXBpL2RvbWFpbnMvJyArIGxvY2FsRG9tYWluSWQgKyAnLycgKyBmaWxlTmFtZSxcblx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdHBhcmFtczoge1xuXHRcdFx0XHQnZG9tYWluSWQnOiBsb2NhbERvbWFpbklkLFxuXHRcdFx0XHQnZmlsZU5hbWUnOiBmaWxlTmFtZVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdHRoaXMuc2luZ2xlRG9tYWluVmlldyA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCcvdmlldy9kb21haW4nKVxuXHR9O1xuXG5cdHRoaXMucHJvYmxlbVZpZXcgPSBmdW5jdGlvbigpIHtcblx0XHQkbG9jYXRpb24ucGF0aCgnL3ZpZXcvZG9tYWluL3BkZGwnKVxuXHR9O1xuXHRcblx0dGhpcy5kb21haW5WaWV3ID0gZnVuY3Rpb24oKSB7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy92aWV3L2RvbWFpbi9wZGRsJylcblx0fTtcblxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignRG9tYWluVmlld0NvbnRyb2xsZXInLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIERvbWFpblNlcnZpY2UpIHtcblx0XG5cblx0JHNjb3BlLmRvbWFpbiA9ICRyb290U2NvcGUuY3VycmVudERvbWFpbjtcblxuXHQkc2NvcGUuZ2V0UGRkbEZpbGUgPSBmdW5jdGlvbihmaWxlTmFtZSkge1xuXHRcdERvbWFpblNlcnZpY2UuZmV0Y2hQZGRsRmlsZShmaWxlTmFtZSkuc3VjY2VzcyAoZnVuY3Rpb24gKHBkZGwpIHtcblx0XHRcdGlmIChwZGRsKVxuXHRcdFx0XHQkcm9vdFNjb3BlLnBkZGwgPSBwZGRsO1xuXHRcdFx0RG9tYWluU2VydmljZS5wcm9ibGVtVmlldygpXG5cdFx0fSlcblx0fVxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignTWFpbkNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcblx0XG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1BkZGxWaWV3Q29udHJvbGxlcicsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUpIHtcblx0JHNjb3BlLnBkZGwgPSAkcm9vdFNjb3BlLnBkZGxcbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuXHQkcm91dGVQcm92aWRlclxuXHQud2hlbignLycsIHsgY29udHJvbGxlcjogJ01haW5Db250cm9sbGVyJywgdGVtcGxhdGVVcmw6ICdpbmRleC5odG1sJyB9KVxuXHQud2hlbignL3ZpZXcnLCB7IGNvbnRyb2xsZXI6ICdEb21haW5Db250cm9sbGVyJywgdGVtcGxhdGVVcmw6ICd2aWV3Lmh0bWwnIH0pXG5cdC53aGVuKCcvdmlldy9kb21haW4nLCB7IGNvbnRyb2xsZXI6ICdEb21haW5WaWV3Q29udHJvbGxlcicsIHRlbXBsYXRlVXJsOiAnZG9tYWluLXZpZXcuaHRtbCcgfSlcblx0LndoZW4oJy92aWV3L2RvbWFpbi9wZGRsJywgeyBjb250cm9sbGVyOiAnUGRkbFZpZXdDb250cm9sbGVyJywgdGVtcGxhdGVVcmw6ICdwZGRsLXZpZXcuaHRtbCcgfSlcblx0LndoZW4oJy9zdWJtaXQnLCB7IGNvbnRyb2xsZXI6ICdTdWJtaXRDb250cm9sbGVyJywgdGVtcGxhdGVVcmw6ICdzdWJtaXQuaHRtbCcgfSlcblx0LndoZW4oJy9zdWJtaXQvcGxhbm5lcicsIHsgY29udHJvbGxlcjogJ1N1Ym1pdENvbnRyb2xsZXInLCB0ZW1wbGF0ZVVybDogJ3N1Ym1pdC1wbGFubmVyLmh0bWwnIH0pXG5cdC53aGVuKCcvc3VibWl0L3N1Y2Nlc3MnLCB7IGNvbnRyb2xsZXI6ICdTdWJtaXRDb250cm9sbGVyJywgdGVtcGxhdGVVcmw6ICdzdWNjZXNzLmh0bWwnIH0pXG5cdC53aGVuKCcvc3VibWl0L2Vycm9yJywgeyBjb250cm9sbGVyOiAnU3VibWl0Q29udHJvbGxlcicsIHRlbXBsYXRlVXJsOiAnZXJyb3IuaHRtbCcgfSlcblx0LndoZW4oJy9jb21wZXRpdGlvbicsIHsgY29udHJvbGxlcjogJ0NvbXBldGl0aW9uQ29udHJvbGxlcicsIHRlbXBsYXRlVXJsOiAnY29tcGV0aXRpb24uaHRtbCcgfSlcbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignU3VibWl0Q29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRyb290U2NvcGUsICR0aW1lb3V0LCBVcGxvYWQsIFN1Ym1pdFNlcnZpY2UpIHtcblx0XG5cdCRzY29wZS5hbGxEb21haW5GaWxlcyA9IFt7aWQ6ICdkb21haW4xJ31dO1xuXHQkc2NvcGUucHVibGlzaERhdGUgPSBuZXcgRGF0ZSgpO1xuXHRcblx0JHNjb3BlLmZvcm1TdWJtaXR0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoJHJvb3RTY29wZS5mb3JtU3VibWl0dGVkID09PSB0cnVlKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0JHNjb3BlLmFkZERvbWFpbiA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICgkc2NvcGUuYWxsRG9tYWluRmlsZXNbJHNjb3BlLmFsbERvbWFpbkZpbGVzLmxlbmd0aCAtIDFdLmRvbWFpbkZpbGUgJiZcblx0XHRcdCRzY29wZS5hbGxEb21haW5GaWxlc1skc2NvcGUuYWxsRG9tYWluRmlsZXMubGVuZ3RoIC0gMV0ucHJvYmxlbUZpbGVzKSB7XG5cdFx0XHR2YXIgbmV3RG9tYWluSWQgPSAkc2NvcGUuYWxsRG9tYWluRmlsZXMubGVuZ3RoICsgMTtcblx0XHRcdCRzY29wZS5hbGxEb21haW5GaWxlcy5wdXNoKHsnaWQnOidkb21haW4nICsgbmV3RG9tYWluSWR9KTtcblx0XHR9XG5cdH07XG5cblx0JHNjb3BlLmdldFVwbG9hZEJ1dHRvbiA9IGZ1bmN0aW9uIChpZCkge1xuXHRcdGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuY2xpY2soKSk7XG5cdH1cblxuXHQkc2NvcGUuc3VibWl0Rm9ybSA9IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBjaGVjayBpZiB0aGUgZmlyc3QgZG9tYWluIGFuZCBwcm9ibGVtIGZpbGVzIHBhaXIgd2FzIHNlbGVjdGVkXG5cdFx0JHNjb3BlLnN1Ym1pdHRlZCA9IHRydWU7IC8vIG5lY2Vzc2FyeT9cblx0XHRpZiAoJHNjb3BlLmFsbERvbWFpbkZpbGVzWzBdLmRvbWFpbkZpbGUgJiYgJHNjb3BlLmFsbERvbWFpbkZpbGVzWzBdLnByb2JsZW1GaWxlcykge1xuXHRcdFx0JHNjb3BlLmZvcm0ucHVibGlzaERhdGUgPSAkc2NvcGUucHVibGlzaERhdGU7XG5cdFx0XHQkc2NvcGUuZm9ybS5kb21haW5GaWxlc1x0PSBbXVx0XG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmFsbERvbWFpbkZpbGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdC8vIGlmIGJvdGggYSBkb21haW4gYW5kIHByb2JsZW0gZmlsZXMgaGF2ZSBiZWVuIHNlbGVjdGVkIGZvciB0aGlzIGVudHJ5XG5cdFx0XHRcdGlmICgkc2NvcGUuYWxsRG9tYWluRmlsZXNbaV0uZG9tYWluRmlsZSAmJlxuXHRcdFx0XHRcdCRzY29wZS5hbGxEb21haW5GaWxlc1tpXS5wcm9ibGVtRmlsZXMpIHtcblxuXHRcdFx0XHRcdHByb2JsZW1GaWxlc05hbWVzID0gW11cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8ICRzY29wZS5hbGxEb21haW5GaWxlc1tpXS5wcm9ibGVtRmlsZXMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdHByb2JsZW1GaWxlc05hbWVzLnB1c2goJHNjb3BlLmFsbERvbWFpbkZpbGVzW2ldLnByb2JsZW1GaWxlc1tqXS5uYW1lKVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdCRzY29wZS5mb3JtLmRvbWFpbkZpbGVzW2ldID0ge1xuXHRcdFx0XHRcdFx0ZG9tYWluRmlsZTogJHNjb3BlLmFsbERvbWFpbkZpbGVzW2ldLmRvbWFpbkZpbGUubmFtZSxcblx0XHRcdFx0XHRcdHByb2JsZW1GaWxlczogcHJvYmxlbUZpbGVzTmFtZXNcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0U3VibWl0U2VydmljZS5zdWJtaXREb21haW5Gb3JtKCRzY29wZS5mb3JtKS4gc3VjY2VzcyhmdW5jdGlvbiAoZGlybmFtZSkge1xuXHRcdFx0XHRcdCRyb290U2NvcGUuZm9ybVN1Ym1pdHRlZCA9IHRydWU7XG5cblx0XHRcdFx0XHQkc2NvcGUudXBsb2FkRmlsZXMoZGlybmFtZSkuc3VjY2VzcyAoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0U3VibWl0U2VydmljZS5kb21haW5Ob3RpZnlTZXJ2ZXIoZGlybmFtZSkuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFN1Ym1pdFNlcnZpY2UuZm9ybVN1Y2Nlc3MoKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fSkuZXJyb3IgKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFN1Ym1pdFNlcnZpY2UuZm9ybUVycm9yKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0JHNjb3BlLnN1Ym1pdFBsYW5uZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCRzY29wZS5wbGFubmVyRm9ybS5wbGFubmVyRmlsZSkge1xuXHRcdFx0JHJvb3RTY29wZS5mb3JtU3VibWl0dGVkID0gdHJ1ZTtcblxuXHRcdFx0JHNjb3BlLnVwbG9hZFBsYW5uZXIoKS5zdWNjZXNzIChmdW5jdGlvbiAoZGlyTmFtZSkge1xuXHRcdFx0XHRTdWJtaXRTZXJ2aWNlLnBsYW5uZXJOb3RpZnlTZXJ2ZXIoZGlyTmFtZSkuc3VjY2VzcyAoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFN1Ym1pdFNlcnZpY2UuZm9ybVN1Y2Nlc3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdH0pLmVycm9yIChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFN1Ym1pdFNlcnZpY2UuZm9ybUVycm9yKCk7XG5cdFx0XHR9KVxuXHRcdH1cblx0fVxuXG5cdCRzY29wZS51cGxvYWRGaWxlcyA9IGZ1bmN0aW9uIChkaXJuYW1lKSB7XG5cdFx0dmFyIGZpbGVzID0gW11cblxuXHRcdC8vIGZpbGwgZmlsZXMgYXJyYXkgd2l0aCBhbGwgZmlsZXMgc2VsZWN0ZWRcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5hbGxEb21haW5GaWxlcy5sZW5ndGg7ICsraSkge1xuXHRcdFx0Ly8gaWYgYm90aCBhIGRvbWFpbiBhbmQgcHJvYmxlbSBmaWxlcyBoYXZlIGJlZW4gc2VsZWN0ZWQgZm9yIHRoaXMgZW50cnlcblx0XHRcdGlmICgkc2NvcGUuYWxsRG9tYWluRmlsZXNbaV0uZG9tYWluRmlsZSAmJlxuXHRcdFx0XHQkc2NvcGUuYWxsRG9tYWluRmlsZXNbaV0ucHJvYmxlbUZpbGVzKSB7XG5cdFx0XHRcdGZpbGVzLnB1c2goJHNjb3BlLmFsbERvbWFpbkZpbGVzW2ldLmRvbWFpbkZpbGUpXG5cblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCAkc2NvcGUuYWxsRG9tYWluRmlsZXNbaV0ucHJvYmxlbUZpbGVzLmxlbmd0aDsgKytqKSB7XG5cdFx0XHRcdFx0ZmlsZXMucHVzaCgkc2NvcGUuYWxsRG9tYWluRmlsZXNbaV0ucHJvYmxlbUZpbGVzW2pdKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBmaWxlcyBhcnJheSB0byBub2RlIGpzXG5cdFx0cmV0dXJuIFVwbG9hZC51cGxvYWQoe1xuXHRcdFx0XHR1cmw6ICcvYXBpL3VwbG9hZCcsXG5cdFx0XHRcdGFycmF5S2V5OiAnJyxcblx0XHRcdFx0ZGF0YToge2ZpbGVzOiBmaWxlcywgZGlybmFtZTogZGlybmFtZX1cblx0XHRcdH0pXG5cdH1cblxuXHQkc2NvcGUudXBsb2FkUGxhbm5lciA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gVXBsb2FkLnVwbG9hZCh7XG5cdFx0XHR1cmw6ICcvYXBpL3VwbG9hZC9wbGFubmVyJyxcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0ZmlsZTogJHNjb3BlLnBsYW5uZXJGb3JtLnBsYW5uZXJGaWxlLFxuXHRcdFx0XHRlbWFpbDogJHNjb3BlLnBsYW5uZXJGb3JtLmVtYWlsLFxuXHRcdFx0XHRvcmc6ICRzY29wZS5wbGFubmVyRm9ybS5vcmdcblx0XHRcdH1cblx0XHR9KVxuXHR9XG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1N1Ym1pdFNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgJGxvY2F0aW9uKSB7XG5cdFx0dGhpcy5zdWJtaXREb21haW5Gb3JtID0gZnVuY3Rpb24gKGZvcm1EYXRhKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0XHR1cmw6ICcvYXBpL3VwbG9hZC9kb21haW4tZm9ybScsXG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHRkYXRhOiBmb3JtRGF0YVxuXHRcdFx0fSlcblx0XHR9O1xuXG5cdFx0dGhpcy5wbGFubmVyTm90aWZ5U2VydmVyID0gZnVuY3Rpb24gKGRpck5hbWUpIHtcblx0XHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRcdHVybDogJy9hcGkvdXBsb2FkL3BsYW5uZXItbm90aWZ5Jyxcblx0XHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdFx0cGFyYW1zOiB7J2Rpcm5hbWUnOiBkaXJOYW1lfVxuXHRcdFx0fSlcblx0XHR9XG5cblx0XHR0aGlzLmRvbWFpbk5vdGlmeVNlcnZlciA9IGZ1bmN0aW9uIChkaXJOYW1lKSB7XG5cdFx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0XHR1cmw6ICcvYXBpL3VwbG9hZC9kb21haW4tbm90aWZ5Jyxcblx0XHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdFx0cGFyYW1zOiB7J2Rpcm5hbWUnOiBkaXJOYW1lfVxuXHRcdFx0fSlcblx0XHR9XG5cblx0XHR0aGlzLmZvcm1TdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0JGxvY2F0aW9uLnBhdGgoJy9zdWJtaXQvc3VjY2VzcycpO1xuXHRcdH07XG5cblx0XHR0aGlzLmZvcm1FcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvc3VibWl0L2Vycm9yJyk7XG5cdFx0fTtcbn0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
